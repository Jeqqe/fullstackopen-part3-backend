(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),a=t(3),o=t(2),i=t(0),u=function(e){var n=e.handleSubmit,t=e.newName,r=e.handleNameChange,c=e.newNumber,a=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:r})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:c,onChange:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},s=function(e){var n=e.filter,t=e.handleFilterChange;return Object(i.jsxs)(i.Fragment,{children:["filter shown with: ",Object(i.jsx)("input",{value:n,onChange:t})]})},d=t(4),l=t.n(d),j="/api/persons",b={getAll:function(){return l.a.get(j).then((function(e){return e.data}))},create:function(e){return l.a.post(j,e).then((function(e){return e.data}))},update:function(e,n){return l.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))}},f=function(e){var n=e.setPersons,t=e.id,r=e.name,c=e.number;return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:r}),Object(i.jsx)("td",{children:c}),Object(i.jsx)("td",{children:Object(i.jsx)("button",{type:"submit",onClick:function(){window.confirm("Delete ".concat(r,"?"))&&b.remove(t).then((function(){b.getAll().then((function(e){return n(e)}))}))},children:"delete"})})]})},h=function(e){var n=e.setPersons,t=e.persons,r=e.filter;return Object(i.jsx)("table",{children:Object(i.jsx)("tbody",{children:t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())})).map((function(e){return Object(i.jsx)(f,{setPersons:n,id:e.id,name:e.name,number:e.number},e.name)}))})})},m=function(e){var n=e.announcement;if(null===n)return null;switch(n.type.toLowerCase()){case"success":return Object(i.jsx)("div",{className:"notificationSuccess",children:n.message});case"error":return Object(i.jsx)("div",{className:"notificationError",children:n.message});default:return null}},O=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),d=Object(a.a)(c,2),l=d[0],j=d[1],f=Object(o.useState)(""),O=Object(a.a)(f,2),p=O[0],v=O[1],x=Object(o.useState)(""),g=Object(a.a)(x,2),w=g[0],C=g[1],N=Object(o.useState)(null),y=Object(a.a)(N,2),S=y[0],k=y[1];Object(o.useEffect)((function(){b.getAll().then((function(e){r(e)}))}),[]);var A=function(e){k({type:"success",message:e}),setTimeout((function(){k(null)}),5e3)};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(m,{announcement:S}),Object(i.jsx)(s,{filter:w,handleFilterChange:function(e){C(e.target.value)}}),Object(i.jsx)("h2",{children:"Add new"}),Object(i.jsx)(u,{handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===l.toLowerCase()}));if(!n||window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))){var c={name:l,number:p};n?b.update(n.id,c).then((function(e){r(t.map((function(n){return n.id===e.id?e:n}))),A("Updated information of ".concat(c.name))})).catch((function(){var e;e="Information of ".concat(c.name," has already been removed from server"),k({type:"error",message:e}),setTimeout((function(){k(null)}),5e3)})):(b.create(c).then((function(e){r(t.concat(e))})),A("Added information of ".concat(c.name))),j(""),v("")}},handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){v(e.target.value)},newName:l,newNumber:p}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(h,{setPersons:r,persons:t,filter:w})]})};t(38);c.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fc045fe7.chunk.js.map